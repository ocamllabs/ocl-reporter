<?xml version="1.0" encoding="UTF-8"?>

<title>OCaml Platform</title>
    <style>
    a.icon-github {
	background: url(../github.png) no-repeat 0 0;
	padding: 0 0 2px 2em;
    }
    a.icon-cloud {
	background: url(../cloud.png) no-repeat 0 0;
        background-size: 17px;
	padding: 0 0 2px 2em;
    }
    a.icon-bullhorn {
	background: url(../bullhorn.png) no-repeat 0 0;
        background-size: 17px;
	padding: 0 0 2px 2em;
    }
    a.icon-wrench {
	background: url(../wrench.png) no-repeat 0 0;
        background-size: 17px;
	padding: 0 0 2px 2em;
    }
    </style>
  <body>
    <div class="ucampas-toc right"/>
    
    
            <style type="text/css">
            table { 
            table-layout: fixed;
            border-spacing: 0px 2px;
            }
            .blank { background-color: #fefefe; }
            .planning { background-color: #bbccee; }
            .doing { background-color: #eeeebb; }
            .complete { background-color: #bbddbb; }
            img.mugshot { float:left; padding-right: 5px; }
            tr.dates {
            font-size: 0.75em;
            background-color: #dfdfdf;
            color: #111111;
            }
            </style>
          
    <h1 id="platform">OCaml Platform</h1>
    <div class="width:75%"><p><a href="http://ocaml.org"><img class="left" src="../images/ocaml-colour.png" width="70px"/></a>The OCaml Platform combines the core OCaml compiler with a coherent set of libraries, tools and documentation. The requirements and direction of the Platform are initially being guided by large users of OCaml such as <a href="http://ocaml.janestreet.com">Jane Street</a>, <a href="http://www.xen.org/files/XenCloud/ocamldoc/">Citrix</a> and <a href="http://www.lexifi.com/product/technology/ocaml">Lexifi</a>.</p>
<p>The reason for initially taking direction from industrial users is because these companies have a great deal of experience of using the language at scale (e.g millions of lines of code, thousands of modules and complicated testing requirements). We take a pragmatic view that examining and solving the problems such users have will ultimately result in a large and positive impact on the wider community, through significantly improved tooling, libraries and documentation.</p>
<p>The current thrust of work is to improve the tooling around packaging, build and test infrastructure. Once complete, this will enable us to effectively run over hundreds of community packages and determine selection criteria for the Platform. A key aspect of this selection will be which libraries are already popular and in use, and also how actively maintained and portable they are across different operating systems.</p>
<p>The tasks below reflect this by:</p>
<ul>
<li>The OPAM package manager acts as the package management front end.</li>
<li>The OPAM Doc tool replaces the venerable <code>ocamldoc</code> tool with modern, cross-referenced HTML output across several libraries.</li>
<li>The OCamlot testing infrastructure runs continuous integration of OPAM stable and candidate packages across a variety of operating systems and CPU architectures.</li>
</ul>
</div>
    <h2 id="Team">Team</h2>
    <p><a href="../people/amirmc.html"><img class="inline" style="" height="50px" src="../mugshots/amir.jpg"/></a><a href="../people/avsm.html"><img class="inline" style="" height="50px" src="../mugshots/avsm.jpg"/></a><a href="../people/lpw25.html"><img class="inline" style="" height="50px" src="../mugshots/lpw25.jpg"/></a><a href="../people/pwang.html"><img class="inline" style="" height="50px" src="../mugshots/pwang.jpg"/></a><a href="../people/sheets.html"><img class="inline" style="" height="50px" src="../mugshots/sheets.png"/></a><a href="../people/tg.html"><img class="inline" style="" height="50px" src="../mugshots/tg.png"/></a><a href="../people/vbotbol.html"><img class="inline" style="" height="50px" src="../mugshots/botbol.png"/></a><a href="../people/yallop.html"><img class="inline" style="" height="50px" src="../mugshots/yallop.jpeg"/></a></p>
    <h2 id="Tasks">Tasks</h2>
    <table class="projects" width="95%">
    <tr class="dates"><td>Sep '12</td><td>Oct '12</td><td>Nov '12</td><td>Dec '12</td><td>Jan '13</td><td>Feb '13</td><td>Mar '13</td><td>Apr '13</td><td>May '13</td><td>Jun '13</td><td>Jul '13</td><td>Aug '13</td><td>Sep '13</td><td>Oct '13</td><td>Nov '13</td><td>Dec '13</td><td>∞</td></tr>
     <tr>  <td class="complete" colspan="7">
               <a href="http://thomas.gazagnaire.org"><img class="mugshot" alt="Thomas Gazagnaire" src="../mugshots/tg.png" height="30px"/></a>
               <a href="#OPAM 1.0 (if it builds, ship it)">OPAM 1.0 (if it builds, ship it)</a><br/>
             </td> <td class="blank" colspan="9"/> <td/> </tr>  <tr> <td class="blank" colspan="6"/> <td class="doing" colspan="3">
               <a href="http://thomas.gazagnaire.org"><img class="mugshot" alt="Thomas Gazagnaire" src="../mugshots/tg.png" height="30px"/></a>
               <a href="#OPAM 1.1 (the CI and Test release)">OPAM 1.1 (the CI and Test release)</a><br/>
             </td> <td class="blank" colspan="7"/> <td/> </tr>  <tr> <td class="blank" colspan="9"/> <td class="planning" colspan="3">
               <a href="http://thomas.gazagnaire.org"><img class="mugshot" alt="Thomas Gazagnaire" src="../mugshots/tg.png" height="30px"/></a>
               <a href="#OPAM 1.2 (the Platform release)">OPAM 1.2 (the Platform release)</a><br/>
             </td> <td class="blank" colspan="4"/> <td/> </tr>  <tr> <td class="blank" colspan="5"/> <td class="doing" colspan="11">
               <a href="https://github.com/vincent- botbol"><img class="mugshot" alt="Vincent Botbol" src="../mugshots/botbol.png" height="30px"/></a>
               <a href="#OPAM Doc">OPAM Doc</a><br/>
             </td>  <td class="doing"><i>plan?</i></td> </tr>  <tr> <td class="blank" colspan="5"/> <td class="planning" colspan="11">
               <img class="mugshot" alt="David Sheets" src="../mugshots/sheets.png" height="30px"/>
               <a href="#OCamlot">OCamlot</a><br/>
             </td>  <td class="planning"><i>plan?</i></td> </tr>  <tr> <td class="blank" colspan="3"/> <td class="doing" colspan="7">
               <a href="http://anil.recoil.org"><img class="mugshot" alt="Anil Madhavapeddy" src="../mugshots/avsm.jpg" height="30px"/></a>
               <a href="#Machine Pool">Machine Pool</a><br/>
             </td> <td class="blank" colspan="6"/> <td/> </tr>  <tr> <td class="blank" colspan="7"/> <td class="planning" colspan="3">
               <a href="http://amirchaudhry.com"><img class="mugshot" alt="Amir Chaudhry" src="../mugshots/amir.jpg" height="30px"/></a>
               <a href="#Platform Preview">Platform Preview</a><br/>
             </td> <td class="blank" colspan="6"/> <td/> </tr> 
    <tr><td colspan="17"> </td></tr>
    </table>
  
    
         <div style="width:75%">
         <h3 style="border-bottom: thin solid #999999;" id="OPAM 1.0 (if it builds, ship it)">OPAM 1.0 (if it builds, ship it)</h3>
         <p><a href="../people/tg.html"><img class="inline" style="float:left; padding-right: 30px" height="40px" src="../mugshots/tg.png"/></a>  <span class="complete">Complete</span> by <a href="../people/tg.html">Thomas Gazagnaire</a> (Mar 2012 - Mar 2013) <br/><a class="icon-github" href="https://github.com/OCamlPro/opam">Github</a>   <a class="icon-cloud" href="http://ocamlpro.opam.com">Homepage</a>   <a class="icon-pdf" href="https://github.com/OCamlPro/opam/blob/master/doc/dev-manual/dev-manual.pdf?raw=true">Developer Manual</a>   <a class="icon-wrench" href="https://github.com/OCamlPro/opam/issues">Issues</a>   </p>
         <p>OPAM 1.0 is a source-based package manager for OCaml. It supports multiple simultaneous compiler installations, flexible package constraints, and a Git-friendly development workflow.</p>
<p>The goal of the first version of OPAM was to get something released that would provide basic package management facilities to the community, but also be designed with distributed open-source design in mind. To that end, OPAM 1.0 supports a <a href="http://opam.ocamlpro.com/doc/Advanced_Usage.html#h2-Handlingofrepositories">remotes</a> mechanism which lets you combine local development trees with other people's remote Git or Darcs repositories. Whenever <code>opam update</code> is run, all the remotes are refreshed and merged, letting you subscribe to other people's compilers and package trees.</p>
<p>This first version is build-system agnostic in the interests of compatibility with the large existing body of third party external source code, and so can't do much in the way of advanced manipulation of the packages.</p>
<p>OPAM 1.0 has been a great success. Since its release, there have been hundreds of external contributions from the community, and over 500 packages are now contained within the <a href="http://github.com/OCamlPro/opam-repository">main package repository</a>!</p>

         <h4><em>Related work</em></h4>
          <ul><li><a href="platform.html#OPAM 1.1 (the CI and Test release)">OPAM 1.1</a></li></ul><br/></div>
      
         <div style="width:75%">
         <h3 style="border-bottom: thin solid #999999;" id="OPAM 1.1 (the CI and Test release)">OPAM 1.1 (the CI and Test release)</h3>
         <p><a href="../people/tg.html"><img class="inline" style="float:left; padding-right: 30px" height="40px" src="../mugshots/tg.png"/></a>  <span class="doing">In Progress</span> by <a href="../people/tg.html">Thomas Gazagnaire</a> (Feb 2013 - May 2013) <br/><a class="icon-github" href="https://github.com/OCamlPro/opam">Github</a>   <a class="icon-cloud" href="http://ocamlpro.opam.com">Homepage</a>   <a class="icon-pdf" href="https://github.com/OCamlPro/opam/blob/master/doc/dev-manual/dev-manual.pdf?raw=true">Developer Manual</a>   <a class="icon-wrench" href="https://github.com/OCamlPro/opam/issues">Issues</a>   </p>
         <p>Since the release of OPAM 1.0, we've steadily been fixing bugs that have been reported from the wider userbase. The release has actually been remarkably stable, and most of the issues are around the constraint solver (which tackles an NP-complete problem with cunning heuristics). There's also been quite a bit of work on improving portability and integration with the operating system via more interactive initialisation.</p>
<p>The big purpose behind the next release, though, is to improve support for large-scale continuous integration and testing of the packages contained within the repository. <a href="http://ocaml.janestreet.com">Jane Street</a>, for example, is now issuing <a href="https://github.com/OCamlPro/opam-repository/pull/506">weekly releases</a> of their Core standard library suite. Testing these manually across Linux, FreeBSD, MacOS X and several CPU architectures (x86, x86_64, ARM, Macppc) is both tedious and error-prone, and so we'd like to automate the process.</p>
<p>OPAM doesn't need many changes to support this testing, but there is more package metadata being added to facilitate the process, and tools such as <a href="http://opam.ocamlpro.com/pkg/oasis2opam.0.2.4.html">oasis2opam</a> help automate this by looking inside the packages themselves. The whole of OPAM is exported as a <a href="http://opam.ocamlpro.com/pkg/opam-lib.1.0.0.html">library</a> so that third-party packages can interface with the OPAM repository without changing OPAM itself. And this is exactly what the &quot;OCamelot&quot; task below does...</p>

         <h4><em>Related work</em></h4>
          <ul><li><a href="platform.html#OPAM 1.2 (the Platform release)">OPAM 1.2</a></li><li><a href="platform.html#OCamlot">OCamlot</a></li></ul><br/></div>
      
         <div style="width:75%">
         <h3 style="border-bottom: thin solid #999999;" id="OPAM 1.2 (the Platform release)">OPAM 1.2 (the Platform release)</h3>
         <p><a href="../people/tg.html"><img class="inline" style="float:left; padding-right: 30px" height="40px" src="../mugshots/tg.png"/></a>  <span class="planning">Planning</span> by <a href="../people/tg.html">Thomas Gazagnaire</a> (May 2013 - Aug 2013) <br/><a class="icon-github" href="https://github.com/OCamlPro/opam">Github</a>   <a class="icon-cloud" href="http://ocamlpro.opam.com">Homepage</a>   <a class="icon-pdf" href="https://github.com/OCamlPro/opam/blob/master/doc/dev-manual/dev-manual.pdf?raw=true">Developer Manual</a>   <a class="icon-wrench" href="https://github.com/OCamlPro/opam/issues">Issues</a>   </p>
         <p>OPAM 1.2 will be the release that forms part of the OCaml Platform. We're still planning this feature-set in more detail, but here are some thoughts:</p>
<ul>
<li><p>OPAM could become a compiler front-end by linking to the <code>compiler-libs</code> that are installed by the OCaml compiler. This lets OPAM automatically satisfy dependencies for packages and generate the boilerplate for testing and benchmarking code.</p></li>
<li><p>The existing support for switching between compiler versions is very powerful, and we plan to support &quot;collections&quot; of stable libraries that are tested more extensively than others. This will evolve into support for switching into a stable release of the Platform, to ensure that your code will interoperate with other users of the same Platform version.</p></li>
</ul>
<p>This is all still being planned, so be sure to share your thoughts on the <a href="http://lists.ocaml.org/listinfo/platform">Platform mailing list</a>.</p>

         <h4><em>Related work</em></h4>
          <ul><li><a href="platform.html#Platform Preview">Platform Preview</a></li></ul><br/></div>
      
         <div style="width:75%">
         <h3 style="border-bottom: thin solid #999999;" id="OPAM Doc">OPAM Doc</h3>
         <p><a href="../people/vbotbol.html"><img class="inline" style="float:left; padding-right: 30px" height="40px" src="../mugshots/botbol.png"/></a>  <span class="doing">In Progress</span> by <a href="../people/vbotbol.html">Vincent Botbol</a> (Jan 2013 -) <br/><a class="icon-github" href="https://github.com/lpw25/opam-doc">opam-doc</a>   <a class="icon-github" href="https://github.com/lpw25/bin-doc">bin-doc</a>   </p>
         <p>The OCaml toolchain has shipped with the <code>ocamldoc</code> tool for a long time. <code>ocamldoc</code> runs over a single OCaml library and generates cross-referenced documentation. It also supports a variety of outputs, such as Latex, HTML, PDF and even manpages. However, it is starting to show its age for large, complex codebases such as <a href="http://github.com/janestreet/core">Core</a>, and so we are developing a more scalable alternative for the Platform effort.</p>
<p>OPAM-doc consists of two separate commands:</p>
<ul>
<li><p><a href="http://github.com/lpw25/bin-doc">bin-doc</a> is a replacement for the OCamldoc lexer (which extracts documentation from <a href="http://caml.inria.fr/pub/docs/manual-ocaml-4.00/manual029.html">source code comments</a>. It uses the OCaml-4.00+ facility for generating <code>.cmt</code> files that contain the typed AST, and generates <code>.cmd</code> files which contain the documentation information. By using a separate file from the AST, we leave open the possibility of having multiple language translations in the future. These <code>.cmd</code> and <code>.cmdi</code> files can be combined with the <code>.cmt</code> files to generate complete documentation directly from the output of the compiler. This command is intended to be temporary, and can be integrated into the upstream in the future.</p></li>
<li><p><a href="http://github.com/lpw25/opam-doc">opam-doc</a> takes a set of <code>cmt</code> and <code>cmd</code> files and outputs a single JSON representation of all the files. This JSON can then be post-processed (or directly rendered in Javascript) to create a single documentation repository that reliably renders cross-references across entire libraries. Thus, the entire Platform can have one documentation source rather than having to search across packages.</p></li>
</ul>
<p>The ultimate aim is to support the OCaml platform with interactive tutorials using the <a href="http://ocsigen.org/js_of_ocaml">js_of_ocaml</a> compiler.</p>

         <br/></div>
      
         <div style="width:75%">
         <h3 style="border-bottom: thin solid #999999;" id="OCamlot">OCamlot</h3>
         <p><a href="../people/sheets.html"><img class="inline" style="float:left; padding-right: 30px" height="40px" src="../mugshots/sheets.png"/></a>  <span class="planning">Planning</span> by <a href="../people/sheets.html">David Sheets</a> (Jan 2013 -) <br/><a class="icon-github" href="https://github.com/ocamllabs/ocamlot">Github</a>   </p>
         <p>OCamlot (OCaml Online Testing), is a Continuous Integration and Testing system for packages provided via <a href="http://opam.ocamlpro.com">OPAM</a>. It comprises all the appropriate tools and libraries to enable management and development of the machine infrastructure, for example an OCaml library to interface with Github (available through OPAM). If you submit a package via OPAM, you will be rewarded with regular regression tests across many diverse operating systems and platforms. Ultimately, we would also like to integrate benchmarking into this system but that will be incorporated in later versions.</p>
<p>The resourcing and commissioning of the Machine Pool itself is dealt with separately to the software that will enable it.</p>
<p>Current status: Creating a spec to define the overall components required.</p>

         <h4><em>Related work</em></h4>
          <ul><li><a href="platform.html#OPAM 1.1 (the CI and Test release)">OPAM 1.1</a></li><li><a href="platform.html#Machine Pool">Machine Pool</a></li></ul><br/></div>
      
         <div style="width:75%">
         <h3 style="border-bottom: thin solid #999999;" id="Machine Pool">Machine Pool</h3>
         <p><a href="../people/avsm.html"><img class="inline" style="float:left; padding-right: 30px" height="40px" src="../mugshots/avsm.jpg"/></a>  <span class="doing">In Progress</span> by <a href="../people/avsm.html">Anil Madhavapeddy</a> (Nov 2012 - Jun 2013) <br/></p>
         <p>In order to create a robust and stable Continuous Integration system, we need a pool of machines that reflect the diverse environments where OCaml code is deployed.</p>
<p>To this end, we've been assembling a small collection of conventional high-powered machines that can build the whole OPAM package set quite quickly, and also more unusual CPU architectures and operating systems that will help developers that don't have access to them. So far we have:</p>
<ul>
<li>12-core AMD64/Linux Debian 64-bit</li>
<li>12-core AMD64/Linux Debian 32-bit</li>
<li>Raspbian ARMv6/Linux 32-bit (Raspberry Pi 512MB)</li>
<li>Debian ARMv6/Linux 32-bit (Dreamplug)</li>
<li>FreeBSD/sparc64 (thanks to Jasper Wallace for the donation)</li>
<li>OpenBSD/macppc (G4 Powerbook) (thanks to Dave Scott for the donation)</li>
<li>MacOS X Mountain Lion</li>
<li>iMac G5/Debian 64-bit</li>
<li>Windows 7 64-bit</li>
</ul>
<p>Clearly the ARM devices will need either some parallelisation or some extreme overclocking to build the whole package set!</p>

         <h4><em>Related work</em></h4>
          <ul><li><a href="platform.html#OCamlot">OCamlot</a></li></ul><br/></div>
      
         <div style="width:75%">
         <h3 style="border-bottom: thin solid #999999;" id="Platform Preview">Platform Preview</h3>
         <p><a href="../people/amirmc.html"><img class="inline" style="float:left; padding-right: 30px" height="40px" src="../mugshots/amir.jpg"/></a>  <span class="planning">Planning</span> by <a href="../people/amirmc.html">Amir Chaudhry</a> (Mar 2013 - Jun 2013) <br/><a class="icon-cloud" href="http://lists.ocaml.org/listinfo/platform">Platform mailing list</a>   </p>
         <p>The OCaml Platform is intended to combine the core OCaml compiler with a coherent set of libraries, tools, docs and other resources. The direction of the Platform will be guided by the major users of OCaml (including consortium members).</p>
<p>The first stage of creating the platform is to begin building OCamlot. This process will help us identify and and refine the initial libraries and tools that should form part of v0.1 of the platform proper. When OCamlot is complete, we'll be in a much better position to discuss what components should form v0.2 of the Platform.</p>

         <h4><em>Related work</em></h4>
          <ul><li><a href="platform.html#OPAM 1.2 (the Platform release)">OPAM 1.2</a></li><li><a href="platform.html#OCamlot">OCamlot</a></li></ul><br/></div>
      
  </body>